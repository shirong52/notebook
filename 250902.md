---


---

<h2 id="任务清单">任务清单</h2>
<h2 id="代码随想录">代码随想录</h2>
<h3 id="、重复的字符串">1、重复的字符串</h3>
<p><a href="https://www.programmercarl.com/0459.%E9%87%8D%E5%A4%8D%E7%9A%84%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2.html#%E6%80%9D%E8%B7%AF">代码随想录</a><br>
<a href="https://leetcode.cn/problems/repeated-substring-pattern/">459. 重复的子字符串 - 力扣（LeetCode）</a><br>
<a href="https://www.bilibili.com/video/BV1cg41127fw/?vd_source=96ef48634663967d0116e79abff26934">字符串这么玩，可有点难度！ | LeetCode：459.重复的子字符串_哔哩哔哩_bilibili</a></p>
<ul>
<li>暴力解法：for循环获取子串的结束位置，内部for循环子串和主串比较</li>
<li>移动匹配：子串s+s组成新的字符串，其中仍能搜索到子串s，但要把s+s的首尾字母去除，以防又搜索到s本身</li>
<li>KMP算法：听不懂。字符串长度减去最长相等前后缀长度，两者之差为重复的子串长度</li>
</ul>
<h3 id="、用栈实现队列">2、用栈实现队列</h3>
<p><a href="https://www.programmercarl.com/0232.%E7%94%A8%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97.html#%E7%AE%97%E6%B3%95%E5%85%AC%E5%BC%80%E8%AF%BE">代码随想录</a><br>
<a href="https://leetcode.cn/problems/implement-queue-using-stacks/description/">232. 用栈实现队列 - 力扣（LeetCode）</a><br>
<a href="https://www.bilibili.com/video/BV1nY4y1w7VC/?vd_source=96ef48634663967d0116e79abff26934">栈的基本操作！ | LeetCode：232.用栈实现队列_哔哩哔哩_bilibili</a></p>
<ul>
<li>栈先进后出，队列先进先出，故用栈实现队列要有两个栈，来把一个栈的元素颠倒</li>
</ul>
<pre class=" language-c"><code class="prism  language-c">stackin<span class="token punctuation">,</span> stackout<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>
	stackin<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//返回了出栈的数值，故为int</span>
<span class="token keyword">int</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>stackout<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stackin<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="实验">实验</h2>
<ul>
<li>修改了 <a href="http://lorentz.py">lorentz.py</a></li>
</ul>
<blockquote>
<p>具体修改如下：<br>
1.在 oxy_angle 函数中添加了调试信息：</p>
<ul>
<li>检查输入参数 x 、 y 和 curv 是否包含NaN或Inf</li>
<li>在计算时间分量、Lorentz内积、角度计算等关键步骤添加了NaN/Inf检测</li>
<li>使用print语句输出调试信息，便于在日志中查看</li>
<li>在检测到异常时抛出ValueError异常，并提供详细的错误信息</li>
</ul>
<p>2.在 half_aperture 函数中添加了调试信息：</p>
<ul>
<li>检查输入参数 x 和 curv 是否包含NaN或Inf</li>
<li>特别检查 curv 是否为非正值，这可能导致数值不稳定</li>
<li>在计算范数、平方根、asin输入等关键步骤添加了NaN/Inf检测</li>
<li>使用try-except捕获可能的异常，并提供详细的错误信息</li>
</ul>
<p>3.在 log_map0 函数中添加了调试信息：</p>
<ul>
<li>检查输入参数 x 和 curv 是否包含NaN或Inf</li>
<li>在计算距离、acosh输入、输出等关键步骤添加了NaN/Inf检测</li>
<li>记录关键中间变量的统计信息，帮助定位问题</li>
</ul>
<p>4.在 exp_map0 函数中添加了调试信息：</p>
<ul>
<li>检查输入参数 x 和 curv 是否包含NaN或Inf</li>
<li>检查 curv 是否为非正值</li>
<li>在计算平方根、范数、sinh输入输出等关键步骤添加了NaN/Inf检测</li>
<li>使用try-except捕获可能的异常，并提供详细的错误信息</li>
</ul>
<p>这些修改将帮助您在训练过程中精确定位NaN问题的来源。当出现NaN时，日志中会显示详细的调试信息，指出具体是哪个函数的哪一步计算导致了NaN。您可以根据这些信息进一步分析问题原因，并针对性地进行修复。</p>
<p>建议您重新运行训练，观察日志输出，特别关注带有 [DEBUG] 标记的信息，这些信息会指出NaN出现的具体位置和原因。</p>
</blockquote>

