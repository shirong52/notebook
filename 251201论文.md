---


---

<h1 id="重新审视cls和patch-token在视觉transformer中的交互">重新审视[CLS]和Patch Token在视觉Transformer中的交互</h1>
<h2 id="论文深入解读">论文深入解读</h2>
<p>本文研究了视觉Transformer (ViT) 模型中类别 ([CLS]) token与patch token之间的交互关系。视觉Transformer已成为强大、可扩展且通用的视觉表示学习架构。在标准ViT设计中，可学习的[CLS] token被添加到patch token序列前，用于聚合全局信息，而patch token则表示局部特征。尽管这两种token的功能和性质截然不同，但在现有模型中，它们却经过完全相同的计算流程处理。</p>
<p>作者通过分析发现，模型内部机制中，<strong>标准化层（normalization layers）已经在隐式地对这两种token类型进行区分处理</strong>。基于这一洞察，作者提出了一种简单而有效的架构修改方法，明确分离[CLS]和patch token的处理路径，特别是在标准化层和早期查询-键-值（QKV）投影层。</p>
<p>这种有针对性的专门化处理带来了几个显著优势：</p>
<ol>
<li>生成更丰富的密集特征表示</li>
<li>在分割任务上提升了高达2.2 mIoU点的性能</li>
<li>仅增加了约8%的参数，且不增加额外的计算开销</li>
</ol>
<p>研究方法上，作者首先分析了[CLS]和patch token在模型各层中的相似性统计数据。令人惊讶的是，他们发现在注意力层之前的LayerNorm显著降低了[CLS]和patch token之间的相似性，使其接近于零。这表明模型正在隐式地尝试区分这两种token类型，尽管它们共享相同的参数化。</p>
<p>基于这一发现，作者提出了一个专门化（specialization）框架，对模型内的某些层使用不同的权重分别处理[CLS]和patch token。通过一系列消融实验，作者确定了最佳的专门化策略：</p>
<ol>
<li>对所有transformer块的标准化层进行专门化处理</li>
<li>对前1/3的transformer块中的QKV投影层进行专门化处理</li>
</ol>
<p>这种配置在各种分割和深度估计基准上都取得了显著的性能提升，同时保持了在分类任务上的强大性能。例如，在ADE20K分割任务上提升了4.8%的mIoU，在KITTI深度估计任务上降低了6.1%的误差。</p>
<p>作者还证明了该方法在不同规模的模型（ViT-B、ViT-L、ViT-H）以及不同的预训练框架（DINOv2、DeiT-III）上的通用性。通过可视化分析，作者展示了专门化处理如何产生更干净、语义上更有意义的patch表示，减少了纹理和均匀区域中的伪影，从而实现更准确的目标分割。</p>
<h2 id="研究目标与实际问题">研究目标与实际问题</h2>
<h3 id="论文的研究目标与实际问题">1. 论文的研究目标与实际问题</h3>
<ul>
<li>
<p><strong>研究目标</strong>：解决视觉Transformer中[CLS]和patch token共享计算路径所产生的摩擦，通过专门化处理提高模型对不同类型token的表示能力，特别是改进密集预测任务的性能。</p>
</li>
<li>
<p><strong>解决的实际问题</strong>：</p>
<ul>
<li>现有ViT模型对[CLS]和patch token使用相同的处理方式，导致密集特征质量下降</li>
<li>模型需要分配资源来隐式区分这两种token类型，而不是学习更有意义的特征</li>
<li>解决高范数异常(high-norm anomalies)问题，这些异常会导致patch token丧失局部上下文</li>
</ul>
</li>
<li>
<p><strong>产业发展意义</strong>：</p>
<ul>
<li>提高了视觉Transformer在密集预测任务（如语义分割、深度估计）上的性能</li>
<li>不增加计算复杂度的情况下提升模型能力，更适合产业部署</li>
<li>为大规模视觉基础模型的架构设计提供新思路</li>
</ul>
</li>
</ul>
<h2 id="方法与模型">方法与模型</h2>
<h3 id="论文提出的思路、方法与模型">2. 论文提出的思路、方法与模型</h3>
<p>论文的核心思想是为不同类型的token设计专门的处理路径，同时保持它们在注意力机制中的交互。</p>
<h4 id="cls和patch-token的隐式分离">2.1 [CLS]和Patch Token的隐式分离</h4>
<p>作者首先分析了现有模型中[CLS]和patch token的交互，发现：</p>
<ul>
<li>在多个预训练模型（DINOv2、带寄存器的DINOv2、带注意力偏置的DINOv2、DEIT-III）中，位于注意力层之前的LayerNorm显著降低了[CLS]和patch token之间的相似性</li>
<li>LayerNorm通过对不同维度的特征进行点式归一化和仿射变换，实现了这种分离效果</li>
<li>模型深层中的某些特征维度仅被特定类型的token使用，促进了分离效果</li>
</ul>
<p>数学上，作者计算了[CLS]和patch token之间的余弦相似度：</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>similarity</mtext><mo stretchy="false">(</mo><mo stretchy="false">[</mo><mi>C</mi><mi>L</mi><mi>S</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><msub><mtext>patch</mtext><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mo stretchy="false">[</mo><mi>C</mi><mi>L</mi><mi>S</mi><mo stretchy="false">]</mo><mo>⋅</mo><msub><mtext>patch</mtext><mi>i</mi></msub></mrow><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">[</mo><mi>C</mi><mi>L</mi><mi>S</mi><mo stretchy="false">]</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo>⋅</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mtext>patch</mtext><mi>i</mi></msub><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{similarity}([CLS], \text{patch}_i) = \frac{[CLS] \cdot \text{patch}_i}{||[CLS]|| \cdot ||\text{patch}_i||}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">similarity</span></span><span class="mopen">([</span><span class="mord mathnormal" style="margin-right: 0.07153em;">C</span><span class="mord mathnormal">L</span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord text"><span class="mord">patch</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.217524em;"><span class="" style="top: -2.45586em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.24414em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.363em; vertical-align: -0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">∣∣</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.07153em;">C</span><span class="mord mathnormal">L</span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">]</span><span class="mord">∣∣</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">∣∣</span><span class="mord"><span class="mord text"><span class="mord">patch</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.217524em;"><span class="" style="top: -2.45586em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.24414em;"><span class=""></span></span></span></span></span></span><span class="mord">∣∣</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.07153em;">C</span><span class="mord mathnormal">L</span><span class="mord mathnormal" style="margin-right: 0.05764em;">S</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord text"><span class="mord">patch</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.217524em;"><span class="" style="top: -2.45586em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.24414em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p>
<p>通过在LayerNorm前后测量这一相似度，作者发现LayerNorm显著降低了这一值，接近于零或变为负值。</p>
<h4 id="层专门化框架">2.2 层专门化框架</h4>
<p>基于上述观察，作者提出了一个层专门化框架，对模型中的特定层应用不同的权重处理不同类型的token。</p>
<p>具体来说，对于一个transformer块中的层<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span></span></span></span></span>：</p>
<ul>
<li>对于patch token，应用<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mtext>patch</mtext></msub></mrow><annotation encoding="application/x-tex">f_{\text{patch}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">patch</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span></li>
<li>对于[CLS] token，应用<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mtext>cls</mtext></msub></mrow><annotation encoding="application/x-tex">f_{\text{cls}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></li>
</ul>
<p>这两个函数有着相同的结构但不同的参数。作者探讨了对哪些层进行专门化处理最为有效：</p>
<ol>
<li><strong>标准化层专门化</strong>：对所有transformer块中的LayerNorm和LayerScale层进行专门化处理</li>
<li><strong>QKV投影专门化</strong>：对前1/3的transformer块中的QKV投影层进行专门化处理</li>
<li><strong>线性投影和MLP专门化</strong>：对前1/3的transformer块中的线性投影和MLP层进行专门化处理</li>
</ol>
<p>数学上，对于标准化层LayerNorm，其操作如下：</p>
<ul>
<li>对patch token：<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>LN</mtext><mtext>patch</mtext></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>γ</mi><mtext>patch</mtext></msub><mo>⋅</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><msqrt><mrow><mtext>Var</mtext><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>+</mo><mi>ϵ</mi></mrow></msqrt></mfrac><mo>+</mo><msub><mi>β</mi><mtext>patch</mtext></msub></mrow><annotation encoding="application/x-tex">\text{LN}_{\text{patch}}(x) = \gamma_{\text{patch}} \cdot \frac{x - \mathbb{E}[x]}{\sqrt{\text{Var}[x] + \epsilon}} + \beta_{\text{patch}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord text"><span class="mord">LN</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">patch</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.730558em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.05556em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">patch</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.8396em; vertical-align: -0.8296em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.01em;"><span class="" style="top: -2.46416em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.03691em;"><span class="svg-align" style="top: -3.42857em;"><span class="pstrut" style="height: 3.42857em;"></span><span class="mord mtight" style="padding-left: 1.19em;"><span class="mord text mtight"><span class="mord mtight">Var</span></span><span class="mopen mtight">[</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">]</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">ϵ</span></span></span><span class="" style="top: -3.00891em;"><span class="pstrut" style="height: 3.42857em;"></span><span class="hide-tail mtight" style="min-width: 0.853em; height: 1.54286em;"><svg width="400em" height="1.5428571428571431em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.419661em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.485em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">−</span><span class="mord mathbb mtight">E</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.8296em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.05278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">patch</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span></li>
<li>对[CLS] token：<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>LN</mtext><mtext>cls</mtext></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>γ</mi><mtext>cls</mtext></msub><mo>⋅</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><msqrt><mrow><mtext>Var</mtext><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>+</mo><mi>ϵ</mi></mrow></msqrt></mfrac><mo>+</mo><msub><mi>β</mi><mtext>cls</mtext></msub></mrow><annotation encoding="application/x-tex">\text{LN}_{\text{cls}}(x) = \gamma_{\text{cls}} \cdot \frac{x - \mathbb{E}[x]}{\sqrt{\text{Var}[x] + \epsilon}} + \beta_{\text{cls}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">LN</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.63889em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.05556em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.8396em; vertical-align: -0.8296em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.01em;"><span class="" style="top: -2.46416em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.03691em;"><span class="svg-align" style="top: -3.42857em;"><span class="pstrut" style="height: 3.42857em;"></span><span class="mord mtight" style="padding-left: 1.19em;"><span class="mord text mtight"><span class="mord mtight">Var</span></span><span class="mopen mtight">[</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">]</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">ϵ</span></span></span><span class="" style="top: -3.00891em;"><span class="pstrut" style="height: 3.42857em;"></span><span class="hide-tail mtight" style="min-width: 0.853em; height: 1.54286em;"><svg width="400em" height="1.5428571428571431em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.419661em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.485em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">−</span><span class="mord mathbb mtight">E</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.8296em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.05278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></li>
</ul>
<p>其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.05556em;">γ</span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.05278em;">β</span></span></span></span></span>是可学习的参数。</p>
<p>对于QKV投影，其操作如下：</p>
<ul>
<li>对patch token：<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>QKV</mtext><mtext>patch</mtext></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>W</mi><mtext>patch</mtext></msub><mo>⋅</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\text{QKV}_{\text{patch}}(x) = W_{\text{patch}} \cdot x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.13025em; vertical-align: -0.380248em;"></span><span class="mord"><span class="mord text"><span class="mord">QKV</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.241968em;"><span class="" style="top: -2.45586em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">patch</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.380248em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">patch</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">x</span></span></span></span></span></li>
<li>对[CLS] token：<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>QKV</mtext><mtext>cls</mtext></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>W</mi><mtext>cls</mtext></msub><mo>⋅</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\text{QKV}_{\text{cls}}(x) = W_{\text{cls}} \cdot x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">QKV</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.241968em;"><span class="" style="top: -2.45586em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.24414em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal">x</span></span></span></span></span></li>
</ul>
<p>其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.13889em;">W</span></span></span></span></span>是可学习的权重矩阵。</p>
<h4 id="低秩近似优化">2.3 低秩近似优化</h4>
<p>为了减少额外参数的增加，作者还探索了使用低秩适应（LoRA）技术。对于需要专门化的层<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span></span></span></span></span>，[CLS] token的操作被计算为：</p>
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>f</mi><mtext>cls</mtext></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mtext>cls</mtext></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>f</mi><mtext>patch</mtext></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mtext>cls</mtext></msub><mo stretchy="false">)</mo><mo>+</mo><msubsup><mi>f</mi><mtext>cls</mtext><mrow><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">(</mo><msub><mi>x</mi><mtext>cls</mtext></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f_{\text{cls}}(x_{\text{cls}}) = f_{\text{patch}}(x_{\text{cls}}) + f_{\text{cls}}^{(r)}(x_{\text{cls}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">patch</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.34611em; vertical-align: -0.301308em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.0448em;"><span class="" style="top: -2.39869em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span><span class="" style="top: -3.2198em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right: 0.02778em;">r</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.301308em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></p>
<p>其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>f</mi><mtext>cls</mtext><mrow><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo></mrow></msubsup></mrow><annotation encoding="application/x-tex">f_{\text{cls}}^{(r)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.34611em; vertical-align: -0.301308em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.0448em;"><span class="" style="top: -2.39869em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">cls</span></span></span></span></span><span class="" style="top: -3.2198em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right: 0.02778em;">r</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.301308em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是秩为<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathnormal" style="margin-right: 0.02778em;">r</span></span></span></span></span>的低秩分解，极大地减少了额外参数的数量。</p>
<h2 id="实验验证">实验验证</h2>
<h3 id="实验验证方法及结果">3. 实验验证方法及结果</h3>
<p>作者进行了广泛的实验来验证所提出方法的有效性。</p>
<h4 id="实验设置">3.1 实验设置</h4>
<ul>
<li>
<p><strong>预训练框架</strong>：DINOv2（自监督）和DeiT-III（完全监督）</p>
</li>
<li>
<p><strong>模型规模</strong>：ViT-B、ViT-L和ViT-H</p>
</li>
<li>
<p><strong>数据集</strong>：</p>
<ul>
<li>预训练：ImageNet-22K（DINOv2）和ImageNet-1K（DeiT-III）</li>
<li>评估：
<ul>
<li>分类：ImageNet-1K</li>
<li>语义分割：ADE20K、Cityscapes、Pascal VOC</li>
<li>深度估计：KITTI、NYU Depth v2、SUN RGB-D</li>
<li>目标检测：COCO</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>评估指标</strong>：</p>
<ul>
<li>分类：Top-1准确率</li>
<li>分割：mIoU</li>
<li>深度估计：RMSE</li>
<li>检测：AP</li>
</ul>
</li>
</ul>
<h4 id="主要实验结果">3.2 主要实验结果</h4>
<p><strong>标准化层专门化实验</strong>：</p>
<ul>
<li>仅增加0.05%的参数</li>
<li>分割任务平均提升1.1个mIoU点</li>
<li>深度估计改进0.054米RMSE</li>
<li>线性准确率轻微下降0.3%</li>
</ul>
<p><strong>块级专门化实验</strong>：</p>
<ul>
<li>专门化模型前1/3的块效果最佳</li>
<li>专门化前1/3块的分割结果提升1.2个mIoU点，对线性准确率几乎没有影响</li>
<li>专门化后半部分无显著改进</li>
</ul>
<p><strong>层级专门化实验</strong>：</p>
<ul>
<li>QKV投影专门化带来最大收益：增加8%参数，分割结果比仅标准化专门化提高1个mIoU点</li>
<li>MLP专门化对性能无益或有害</li>
<li>线性投影专门化效果不如QKV投影</li>
</ul>
<p><strong>通用性实验</strong>：</p>
<ul>
<li>在不同的高范数处理策略（无处理、4个寄存器、注意力偏置）上均有显著提升</li>
<li>在不同模型规模（ViT-B、ViT-L、ViT-H）上均能提升性能</li>
<li>在DeiT-III监督学习框架上也能带来密集预测任务的改进</li>
</ul>
<p><strong>关键量化结果</strong>：</p>
<ul>
<li>ADE20K上最高提升4.8%的mIoU（DINOv2 ViT-L）</li>
<li>Cityscapes上最高提升3.7%的mIoU（DINOv2 ViT-L）</li>
<li>KITTI上降低6.1%的RMSE误差（DINOv2 ViT-L）</li>
<li>COCO上提升4.8%的AP（DINOv2 ViT-L）</li>
</ul>
<p><strong>与CaiT比较</strong>：</p>
<ul>
<li>作者将其专门化方法与CaiT的类别注意力机制进行了比较</li>
<li>在所有下游任务上，专门化方法都优于类别注意力机制</li>
<li>当使用注意力偏置时，专门化方法在ADE20K上比CaiT高3.1个mIoU点</li>
</ul>
<h2 id="研究方向与挑战">研究方向与挑战</h2>
<h3 id="未来研究方向与挑战">4. 未来研究方向与挑战</h3>
<ol>
<li>
<p><strong>更高效的专门化策略</strong>：</p>
<ul>
<li>探索更高效的低秩适应（LoRA）方法，在不增加大量参数的情况下实现专门化</li>
<li>研究动态专门化机制，根据输入内容自适应地调整专门化程度</li>
</ul>
</li>
<li>
<p><strong>扩展到其他模态和任务</strong>：</p>
<ul>
<li>将专门化思想扩展到多模态模型中，如处理视觉-语言任务</li>
<li>探索在视频理解、3D视觉等时空任务中的应用</li>
</ul>
</li>
<li>
<p><strong>更深入的理论理解</strong>：</p>
<ul>
<li>进一步研究为什么早期层的专门化比晚期层更重要</li>
<li>探索不同token类型在模型各层中的功能差异</li>
</ul>
</li>
<li>
<p><strong>结合其他架构改进</strong>：</p>
<ul>
<li>将专门化方法与其他ViT改进（如稀疏注意力、局部结构建模等）结合</li>
<li>探索在更大规模模型上的效果和扩展性</li>
</ul>
</li>
<li>
<p><strong>专门化与预训练目标的关系</strong>：</p>
<ul>
<li>研究不同预训练目标对专门化效果的影响</li>
<li>设计更好的预训练目标来进一步增强专门化的效果</li>
</ul>
</li>
</ol>
<h2 id="不足与局限">不足与局限</h2>
<h3 id="论文不足与局限">5. 论文不足与局限</h3>
<ol>
<li>
<p><strong>参数增加</strong>：</p>
<ul>
<li>虽然计算复杂度没有增加，但参数量增加了约8%，可能增加存储需求和训练成本</li>
<li>对于超大规模模型，这种增加可能会变得显著</li>
</ul>
</li>
<li>
<p><strong>特定层次的依赖</strong>：</p>
<ul>
<li>方法的有效性严重依赖于专门化正确的层，需要仔细的消融实验来确定</li>
<li>不同的预训练框架可能需要不同的专门化策略</li>
</ul>
</li>
<li>
<p><strong>监督学习中的局限性</strong>：</p>
<ul>
<li>在DeiT-III上的实验表明，专门化在ViT-L上效果不佳，可能与训练动态有关</li>
<li>作者指出缺乏局部损失可能导致密集性能下降，但没有提供解决方案</li>
</ul>
</li>
<li>
<p><strong>理论解释不足</strong>：</p>
<ul>
<li>虽然提供了实证分析，但缺乏理论上的深入解释，为什么LayerNorm会产生分离效果</li>
<li>没有解释为什么专门化早期层比后期层更有效的机制</li>
</ul>
</li>
<li>
<p><strong>评估的局限性</strong>：</p>
<ul>
<li>虽然在多个基准上评估了性能，但缺少在更具挑战性的数据集上的测试</li>
<li>没有评估在域泛化或少样本学习等情景下的性能</li>
</ul>
</li>
</ol>
<h2 id="创新与启发">创新与启发</h2>
<h3 id="创新想法与启发">6. 创新想法与启发</h3>
<ol>
<li>
<p><strong>启发性架构设计思路</strong>：</p>
<ul>
<li>根据token类型的不同功能分离处理路径，而非简单地共享所有计算</li>
<li>通过轻量级的修改显著提升性能，展示了小改动的潜力</li>
</ul>
</li>
<li>
<p><strong>实用价值高的应用思路</strong>：</p>
<ul>
<li>无需额外计算开销即可提升密集预测任务性能</li>
<li>可以作为现有ViT模型的即插即用升级，提供产业应用价值</li>
</ul>
</li>
<li>
<p><strong>需要了解的背景知识</strong>：</p>
<ul>
<li><strong>视觉Transformer架构</strong>：了解ViT的基本组件和工作原理，特别是self-attention机制和normalization层</li>
<li><strong>密集预测任务</strong>：理解语义分割、深度估计等需要精细局部特征的任务需求</li>
<li><strong>预训练框架</strong>：熟悉DINOv2等自监督学习方法和DeiT-III等监督学习方法</li>
<li><strong>低秩近似</strong>：了解LoRA等参数高效微调技术</li>
</ul>
</li>
<li>
<p><strong>对视觉特征学习的思考</strong>：</p>
<ul>
<li>全局和局部特征应该采用不同的处理方式</li>
<li>模型架构应当反映不同token的功能差异</li>
<li>标准化层不仅具有正则化作用，还能对不同类型的表示进行分离</li>
</ul>
</li>
<li>
<p><strong>模型内部机制的洞察</strong>：</p>
<ul>
<li>研究模型如何隐式处理不同类型的信息</li>
<li>分析LayerNorm等基础组件的实际功能</li>
<li>通过可视化和统计分析理解模型内部的信息流动</li>
</ul>
</li>
</ol>
<p>本文通过分析视觉Transformer中的token交互问题，提出了一种简单而有效的专门化方法，在不增加计算成本的情况下显著提升了密集预测任务的性能。这种专门化思路不仅适用于视觉Transformer，也为其他多类型token交互的模型设计提供了启发。</p>

